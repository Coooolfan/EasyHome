<template>
  <div class="dashboard">
    <!-- Ê¨¢ËøéËØ≠ -->
    <div class="welcome-section">
      <div class="welcome-content">
        <h1 class="welcome-title">üëã Ê¨¢ËøéÂõûÊù•Ôºå{{ userInfo.username }}</h1>
        <p class="welcome-subtitle">‰ªäÂ§©ÊòØ {{ currentDate }}ÔºåÁ•ùÊÇ®Â∑•‰ΩúÊÑâÂø´ÔºÅ</p>
      </div>
       <div class="welcome-right">
      
        <el-button type="success" size="large" @click="showReportDialog">
          <el-icon><Document /></el-icon>
          Êü•ÁúãÊä•Âëä
        </el-button>
      </div>
    </div>

    <!-- ÁªüËÆ°Âç°Áâá -->
    <el-row :gutter="24" class="stats-section">
      <el-col :span="6" v-for="(stat, index) in statsData" :key="index">
        <div class="stat-card" :class="stat.className">
          <div class="stat-card-content">
            <div class="stat-icon">
              <component :is="stat.icon" />
            </div>
            <div class="stat-info">
              <div class="stat-value" :style="{ color: stat.color }">
                {{ stat.value }}
              </div>
              <div class="stat-label">{{ stat.label }}</div>
              <div class="stat-trend" :class="stat.trendClass">
                <el-icon><component :is="stat.trendIcon" /></el-icon>
                <span>{{ stat.trend }}</span>
              </div>
            </div>
          </div>
        </div>
      </el-col>
    </el-row>

    <!-- Êï∞ÊçÆÂõæË°®ÂíåÊúÄËøëÊ¥ªÂä® -->
    <el-row :gutter="24" class="content-section">
      <!-- Êï∞ÊçÆÂõæË°® -->
      <el-col :span="16">
        <el-card class="chart-card">
          <template #header>
            <div class="card-header">
              <div class="header-left">
                <el-icon class="header-icon"><TrendCharts /></el-icon>
                <span class="header-title">Êï∞ÊçÆË∂ãÂäø</span>
              </div>
              <el-button text type="primary" @click="refreshData">
                <el-icon><Refresh /></el-icon>
                Âà∑Êñ∞Êï∞ÊçÆ
              </el-button>
            </div>
          </template>
          
          <!-- ÁúüÂÆûÂõæË°®ÂÆπÂô® -->
          <div ref="chartRef" class="chart-container"></div>
        </el-card>
      </el-col>

      <!-- ÊúÄËøëÊ¥ªÂä® -->
      <el-col :span="8">
        <el-card class="activity-card">
          <template #header>
            <div class="card-header">
              <div class="header-left">
                <el-icon class="header-icon"><Clock /></el-icon>
                <span class="header-title">ÊúÄËøëÊ¥ªÂä®</span>
              </div>
            </div>
          </template>
          <div class="activity-list">
            <div class="activity-item" v-for="(activity, index) in recentActivities" :key="index">
              <div class="activity-icon" :class="activity.type">
                <el-icon><component :is="activity.icon" /></el-icon>
              </div>
              <div class="activity-content">
                <div class="activity-title">{{ activity.title }}</div>
                <div class="activity-time">{{ activity.time }}</div>
              </div>
            </div>
          </div>
        </el-card>
      </el-col>
    </el-row>

    <!-- ÊúÄËøëÊï∞ÊçÆË°®Ê†º -->
    <el-row :gutter="24" class="table-section">
      <el-col :span="12">
        <el-card class="table-card">
          <template #header>
            <div class="card-header">
              <div class="header-left">
                <el-icon class="header-icon"><House /></el-icon>
                <span class="header-title">ÊúÄËøëÊàøÊ∫êÂÆ°Ê†∏</span>
              </div>
              <el-button text type="primary" @click="viewAllHouses">
                      Êü•ÁúãÂÖ®ÈÉ® <el-icon><ArrowRight /></el-icon>
              </el-button>
            </div>
          </template>
          <el-table :data="recentHouses" style="width: 100%" class="modern-table">
            <el-table-column prop="title" label="ÊàøÊ∫êÊ†áÈ¢ò" min-width="140">
              <template #default="scope">
                <div class="table-title">{{ scope.row.title }}</div>
              </template>
            </el-table-column>
            <el-table-column prop="price" label="‰ª∑Ê†º" width="100" align="right">
              <template #default="scope">
                <div class="price-text">{{ scope.row.price }}</div>
              </template>
            </el-table-column>
            <el-table-column prop="status" label="Áä∂ÊÄÅ" width="100" align="center">
              <template #default="scope">
                <el-tag 
                  :type="getStatusType(scope.row.status)" 
                  size="small"
                  class="status-tag"
                >
                  {{ getStatusText(scope.row.status) }}
                </el-tag>
              </template>
            </el-table-column>
          </el-table>
        </el-card>
      </el-col>
      
      <el-col :span="12">
        <el-card class="table-card">
          <template #header>
            <div class="card-header">
              <div class="header-left">
                <el-icon class="header-icon"><User /></el-icon>
                <span class="header-title">ÊúÄËøëÁî®Êà∑Ê≥®ÂÜå</span>
              </div>
               <el-button text type="primary" @click="viewAllUsers">
                  Êü•ÁúãÂÖ®ÈÉ® <el-icon><ArrowRight /></el-icon>
              </el-button>
            </div>
          </template>
          <el-table :data="recentUsers" style="width: 100%" class="modern-table">
            <el-table-column prop="username" label="Áî®Êà∑Âêç" min-width="100">
              <template #default="scope">
                <div class="user-info">
                  <el-avatar :size="24" class="user-avatar">
                    {{ scope.row.username.charAt(0) }}
                  </el-avatar>
                  <span class="username">{{ scope.row.username }}</span>
                </div>
              </template>
            </el-table-column>
            <el-table-column prop="email" label="ÈÇÆÁÆ±" min-width="140" />
            <el-table-column prop="registerTime" label="Ê≥®ÂÜåÊó∂Èó¥" width="100" />
          </el-table>
        </el-card>
      </el-col>
    </el-row>

    <!-- Ê∑ªÂä†ÊàøÊ∫êÊ®°ÊÄÅÊ°Ü -->
    <el-dialog
      v-model="addHouseVisible"
      title="Ê∑ªÂä†ÊàøÊ∫ê"
      width="800px"
      :before-close="handleCloseAddHouse"
    >
      <el-form :model="houseForm" :rules="houseRules" ref="houseFormRef" label-width="100px">
        <el-row :gutter="20">
          <el-col :span="12">
            <el-form-item label="ÊàøÊ∫êÊ†áÈ¢ò" prop="title">
              <el-input v-model="houseForm.title" placeholder="ËØ∑ËæìÂÖ•ÊàøÊ∫êÊ†áÈ¢ò" />
            </el-form-item>
          </el-col>
          <el-col :span="12">
            <el-form-item label="ÊàøÊ∫êÁ±ªÂûã" prop="type">
              <el-select v-model="houseForm.type" placeholder="ËØ∑ÈÄâÊã©ÊàøÊ∫êÁ±ªÂûã" style="width: 100%">
                <el-option label="‰ΩèÂÆÖ" value="residential" />
                <el-option label="ÂÖ¨ÂØì" value="apartment" />
                <el-option label="Âà´Â¢Ö" value="villa" />
                <el-option label="ÂïÜÈì∫" value="shop" />
              </el-select>
            </el-form-item>
          </el-col>
        </el-row>

        <el-row :gutter="20">
          <el-col :span="8">
            <el-form-item label="ÂîÆ‰ª∑" prop="price">
              <el-input v-model="houseForm.price" placeholder="ËØ∑ËæìÂÖ•ÂîÆ‰ª∑">
                <template #suffix>‰∏áÂÖÉ</template>
              </el-input>
            </el-form-item>
          </el-col>
          <el-col :span="8">
            <el-form-item label="Èù¢ÁßØ" prop="area">
              <el-input v-model="houseForm.area" placeholder="ËØ∑ËæìÂÖ•Èù¢ÁßØ">
                <template #suffix>„é°</template>
              </el-input>
            </el-form-item>
          </el-col>
          <el-col :span="8">
            <el-form-item label="ÊàøÈó¥Êï∞" prop="rooms">
              <el-select v-model="houseForm.rooms" placeholder="ËØ∑ÈÄâÊã©" style="width: 100%">
                <el-option label="1ÂÆ§" value="1" />
                <el-option label="2ÂÆ§" value="2" />
                <el-option label="3ÂÆ§" value="3" />
                <el-option label="4ÂÆ§" value="4" />
                <el-option label="5ÂÆ§Âèä‰ª•‰∏ä" value="5+" />
              </el-select>
            </el-form-item>
          </el-col>
        </el-row>

        <el-row :gutter="20">
          <el-col :span="12">
            <el-form-item label="ÊâÄÂú®ÂüéÂ∏Ç" prop="city">
              <el-input v-model="houseForm.city" placeholder="ËØ∑ËæìÂÖ•ÂüéÂ∏Ç" />
            </el-form-item>
          </el-col>
          <el-col :span="12">
            <el-form-item label="ËØ¶ÁªÜÂú∞ÂùÄ" prop="address">
              <el-input v-model="houseForm.address" placeholder="ËØ∑ËæìÂÖ•ËØ¶ÁªÜÂú∞ÂùÄ" />
            </el-form-item>
          </el-col>
        </el-row>

        <el-form-item label="ÊàøÊ∫êÊèèËø∞" prop="description">
          <el-input
            v-model="houseForm.description"
            type="textarea"
            :rows="4"
            placeholder="ËØ∑ËæìÂÖ•ÊàøÊ∫êÊèèËø∞"
          />
        </el-form-item>

        <el-form-item label="ÊàøÊ∫êÂõæÁâá">
          <el-upload
            class="upload-demo"
            drag
            action="#"
            multiple
            :auto-upload="false"
            :on-change="handleImageChange"
          >
            <el-icon class="el-icon--upload"><UploadFilled /></el-icon>
            <div class="el-upload__text">
              Â∞ÜÊñá‰ª∂ÊãñÂà∞Ê≠§Â§ÑÔºåÊàñ<em>ÁÇπÂáª‰∏ä‰º†</em>
            </div>
            <template #tip>
              <div class="el-upload__tip">
                jpg/png Êñá‰ª∂Ôºå‰∏î‰∏çË∂ÖËøá 500kb
              </div>
            </template>
          </el-upload>
        </el-form-item>
      </el-form>

      <template #footer>
        <div class="dialog-footer">
          <el-button @click="handleCloseAddHouse">ÂèñÊ∂à</el-button>
          <el-button type="primary" @click="submitHouse" :loading="submitting">
            {{ submitting ? 'Êèê‰∫§‰∏≠...' : 'Êèê‰∫§' }}
          </el-button>
        </div>
      </template>
    </el-dialog>

    <!-- Êü•ÁúãÊä•ÂëäÊ®°ÊÄÅÊ°Ü -->
    <el-dialog
      v-model="reportVisible"
      title="Á≥ªÁªüÊä•Âëä"
      width="900px"
      :before-close="handleCloseReport"
    >
      <el-tabs v-model="activeReportTab" class="report-tabs" @tab-change="handleTabChange">

        <!-- ‰∏öÂä°Êä•Âëä -->
        <el-tab-pane label="‰∏öÂä°Êä•Âëä" name="business">
          <div class="report-content">
            <el-row :gutter="20">
              <el-col :span="8">
                <el-statistic title="Êú¨ÊúàÊñ∞Â¢ûÊàøÊ∫ê" :value="reportData.newHouses" suffix="Â•ó">
                  <template #prefix>
                    <el-icon style="vertical-align: -0.125em"><House /></el-icon>
                  </template>
                </el-statistic>
              </el-col>
              <el-col :span="8">
                <el-statistic title="Êú¨ÊúàÊàê‰∫§Èáè" :value="reportData.transactions" suffix="Â•ó">
                  <template #prefix>
                    <el-icon style="vertical-align: -0.125em"><Check /></el-icon>
                  </template>
                </el-statistic>
              </el-col>
              <el-col :span="8">
                <el-statistic title="Êàê‰∫§ÈáëÈ¢ù" :value="reportData.amount" suffix="‰∏áÂÖÉ">
                  <template #prefix>
                    <el-icon style="vertical-align: -0.125em"><Money /></el-icon>
                  </template>
                </el-statistic>
              </el-col>
            </el-row>

            <el-divider />

            <h4>ÁÉ≠Èó®Âå∫Âüü</h4>
            <el-table :data="reportData.hotAreas" style="width: 100%">
              <el-table-column prop="area" label="Âå∫Âüü" width="200" />
              <el-table-column prop="count" label="ÊàøÊ∫êÊï∞Èáè" width="120" />
              <el-table-column prop="avgPrice" label="Âπ≥Âùá‰ª∑Ê†º" width="150">
                <template #default="scope">
                  {{ scope.row.avgPrice }} ‰∏áÂÖÉ
                </template>
              </el-table-column>
              <el-table-column prop="trend" label="Ë∂ãÂäø">
                <template #default="scope">
                  <el-tag :type="scope.row.trend === 'up' ? 'success' : 'danger'">
                    {{ scope.row.trend === 'up' ? '‰∏äÊ∂®' : '‰∏ãË∑å' }}
                  </el-tag>
                </template>
              </el-table-column>
            </el-table>
          </div>
        </el-tab-pane>

        <!-- Áî®Êà∑Êä•Âëä -->
        <el-tab-pane label="Áî®Êà∑Êä•Âëä" name="user">
          <div class="report-content">
            <el-row :gutter="20">
              <el-col :span="6">
                <el-statistic title="ÊÄªÁî®Êà∑Êï∞" :value="reportData.totalUsers" suffix="‰∫∫">
                  <template #prefix>
                    <el-icon style="vertical-align: -0.125em"><User /></el-icon>
                  </template>
                </el-statistic>
              </el-col>
              <el-col :span="6">
                <el-statistic title="Êú¨ÊúàÊñ∞Â¢û" :value="reportData.newUsers" suffix="‰∫∫">
                  <template #prefix>
                    <el-icon style="vertical-align: -0.125em"><UserFilled /></el-icon>
                  </template>
                </el-statistic>
              </el-col>
              <el-col :span="6">
                <el-statistic title="Ê¥ªË∑ÉÁî®Êà∑" :value="reportData.activeUsers" suffix="‰∫∫">
                  <template #prefix>
                    <el-icon style="vertical-align: -0.125em"><StarFilled /></el-icon>
                  </template>
                </el-statistic>
              </el-col>
              <el-col :span="6">
                <el-statistic title="Áî®Êà∑ÁïôÂ≠òÁéá" :value="reportData.retention" suffix="%">
                  <template #prefix>
                    <el-icon style="vertical-align: -0.125em"><TrendCharts /></el-icon>
                  </template>
                </el-statistic>
              </el-col>
            </el-row>

            <el-divider />

            <h4>Áî®Êà∑Ê¥ªË∑ÉÂ∫¶ÁªüËÆ°</h4>
            <!-- ÁúüÂÆûÁî®Êà∑ÂõæË°®ÂÆπÂô® -->
            <div ref="userChartRef" class="user-chart-container"></div>
          </div>
        </el-tab-pane>

        <!-- Á≥ªÁªüÊä•Âëä -->
        <el-tab-pane label="Á≥ªÁªüÊä•Âëä" name="system">
          <div class="report-content">
            <el-descriptions title="Á≥ªÁªüÁä∂ÊÄÅ" :column="2" border>
              <el-descriptions-item label="Á≥ªÁªüÁâàÊú¨">v2.1.0</el-descriptions-item>
              <el-descriptions-item label="ËøêË°åÊó∂Èó¥">15Â§© 8Â∞èÊó∂ 32ÂàÜÈíü</el-descriptions-item>
              <el-descriptions-item label="CPU‰ΩøÁî®Áéá">
                <el-progress :percentage="reportData.cpuUsage" />
              </el-descriptions-item>
              <el-descriptions-item label="ÂÜÖÂ≠ò‰ΩøÁî®Áéá">
                <el-progress :percentage="reportData.memoryUsage" />
              </el-descriptions-item>
              <el-descriptions-item label="Á£ÅÁõò‰ΩøÁî®Áéá">
                <el-progress :percentage="reportData.diskUsage" />
              </el-descriptions-item>
              <el-descriptions-item label="Êï∞ÊçÆÂ∫ìÁä∂ÊÄÅ">
                <el-tag type="success">Ê≠£Â∏∏</el-tag>
              </el-descriptions-item>
            </el-descriptions>

            <el-divider />

            <h4>Á≥ªÁªüÊó•Âøó</h4>
            <el-table :data="reportData.logs" style="width: 100%">
              <el-table-column prop="time" label="Êó∂Èó¥" width="180" />
              <el-table-column prop="level" label="Á∫ßÂà´" width="80">
                <template #default="scope">
                  <el-tag :type="getLogType(scope.row.level)" size="small">
                    {{ scope.row.level }}
                  </el-tag>
                </template>
              </el-table-column>
              <el-table-column prop="message" label="Ê∂àÊÅØ" />
            </el-table>
          </div>
        </el-tab-pane>
      </el-tabs>

      <template #footer>
        <div class="dialog-footer">
          <el-button @click="exportReport" type="primary">
            <el-icon><Download /></el-icon>
            ÂØºÂá∫Êä•Âëä
          </el-button>
          <el-button @click="handleCloseReport">ÂÖ≥Èó≠</el-button>
        </div>
      </template>
    </el-dialog>

  </div>
</template>


<script setup lang="ts">
import { ref, onMounted, computed, reactive, nextTick, onUnmounted } from 'vue'
import { useUserStore } from '@/stores/user'
import { 
  Plus, Document, Refresh, TrendCharts, Clock, House, User,
  ArrowUp, ArrowDown, UserFilled, OfficeBuilding, Warning,
  Check, Money, StarFilled, Download, UploadFilled, ArrowRight
} from '@element-plus/icons-vue'
import { useRouter } from 'vue-router'
import { ElMessage, ElMessageBox } from 'element-plus'
import type { FormInstance, FormRules } from 'element-plus'
import * as echarts from 'echarts'

const userStore = useUserStore()
const router = useRouter()

const userInfo = computed(() => ({
  username: userStore.userInfo.username || 'ÁÆ°ÁêÜÂëò'
}))

const viewAllUsers = () => {
  router.push('/user-manage')
}

const viewAllHouses = () => {
  router.push('/house-manage')
}

const currentDate = computed(() => {
  return new Date().toLocaleDateString('zh-CN', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    weekday: 'long'
  })
})

// ÁªüËÆ°Êï∞ÊçÆ
const statsData = ref([
  {
    label: 'ÊÄªÁî®Êà∑Êï∞',
    value: '1,280',
    icon: User,
    color: '#409EFF',
    className: 'user-stat',
    trend: '+12.5%',
    trendClass: 'trend-up',
    trendIcon: ArrowUp
  },
  {
    label: 'ÊÄªÊàøÊ∫êÊï∞',
    value: '856',
    icon: House,
    color: '#67C23A',
    className: 'house-stat',
    trend: '+8.2%',
    trendClass: 'trend-up',
    trendIcon: ArrowUp
  },
  {
    label: 'ÂæÖÂÆ°Ê†∏ÊàøÊ∫ê',
    value: '23',
    icon: Clock,
    color: '#E6A23C',
    className: 'pending-stat',
    trend: '-5.4%',
    trendClass: 'trend-down',
    trendIcon: ArrowDown
  },
  {
    label: 'ÁÆ°ÁêÜÂëòÊï∞Èáè',
    value: '8',
    icon: UserFilled,
    color: '#F56C6C',
    className: 'admin-stat',
    trend: '0%',
    trendClass: 'trend-neutral',
    trendIcon: ArrowUp
  }
])

// ÊúÄËøëÊ¥ªÂä®
const recentActivities = ref([
  {
    title: 'Êñ∞Áî®Êà∑Ê≥®ÂÜå',
    time: '2ÂàÜÈíüÂâç',
    icon: User,
    type: 'user'
  },
  {
    title: 'ÊàøÊ∫êÂÆ°Ê†∏ÈÄöËøá',
    time: '5ÂàÜÈíüÂâç',
    icon: House,
    type: 'house'
  },
  {
    title: 'Á≥ªÁªüËÆæÁΩÆÊõ¥Êñ∞',
    time: '10ÂàÜÈíüÂâç',
    icon: Warning,
    type: 'system'
  },
  {
    title: 'Êñ∞ÁÆ°ÁêÜÂëòÂä†ÂÖ•',
    time: '1Â∞èÊó∂Ââç',
    icon: UserFilled,
    type: 'admin'
  }
])

// ÂÆö‰πâÊé•Âè£Á±ªÂûã
interface RecentHouse {
  title: string
  price: string
  status: 'pending' | 'approved' | 'rejected'
}

interface RecentUser {
  username: string
  email: string
  registerTime: string
}

const recentHouses = ref<RecentHouse[]>([])
const recentUsers = ref<RecentUser[]>([])

const getStatusType = (status: string) => {
  switch (status) {
    case 'pending': return 'warning'
    case 'approved': return 'success'
    case 'rejected': return 'danger'
    default: return 'info'
  }
}

const getStatusText = (status: string) => {
  switch (status) {
    case 'pending': return 'ÂæÖÂÆ°Ê†∏'
    case 'approved': return 'Â∑≤ÈÄöËøá'
    case 'rejected': return 'Â∑≤ÊãíÁªù'
    default: return 'Êú™Áü•'
  }
}

const refreshData = () => {
  // Âà∑Êñ∞ÂõæË°®Êï∞ÊçÆ
  refreshCharts()
  // ÂÖ∂‰ªñÊï∞ÊçÆÂà∑Êñ∞ÈÄªËæë
  loadDashboardData()
  // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
  ElMessage.success('Êï∞ÊçÆÂ∑≤Âà∑Êñ∞')
}


// Ê∑ªÂä†ÊàøÊ∫êÁõ∏ÂÖ≥
const addHouseVisible = ref(false)
const submitting = ref(false)
const houseFormRef = ref<FormInstance>()

const houseForm = reactive({
  title: '',
  type: '',
  price: '',
  area: '',
  rooms: '',
  city: '',
  address: '',
  description: ''
})

const houseRules: FormRules = {
  title: [
    { required: true, message: 'ËØ∑ËæìÂÖ•ÊàøÊ∫êÊ†áÈ¢ò', trigger: 'blur' }
  ],
  type: [
    { required: true, message: 'ËØ∑ÈÄâÊã©ÊàøÊ∫êÁ±ªÂûã', trigger: 'change' }
  ],
  price: [
    { required: true, message: 'ËØ∑ËæìÂÖ•ÂîÆ‰ª∑', trigger: 'blur' }
  ],
  area: [
    { required: true, message: 'ËØ∑ËæìÂÖ•Èù¢ÁßØ', trigger: 'blur' }
  ],
  city: [
    { required: true, message: 'ËØ∑ËæìÂÖ•ÂüéÂ∏Ç', trigger: 'blur' }
  ],
  address: [
    { required: true, message: 'ËØ∑ËæìÂÖ•ËØ¶ÁªÜÂú∞ÂùÄ', trigger: 'blur' }
  ]
}

// Êü•ÁúãÊä•ÂëäÁõ∏ÂÖ≥
const reportVisible = ref(false)
const activeReportTab = ref('business')

const reportData = reactive({
  // ‰∏öÂä°Êï∞ÊçÆ
  newHouses: 156,
  transactions: 89,
  amount: 2580,
  hotAreas: [
    { area: 'Â∏Ç‰∏≠ÂøÉ', count: 45, avgPrice: 89, trend: 'up' },
    { area: 'È´òÊñ∞Âå∫', count: 32, avgPrice: 76, trend: 'up' },
    { area: 'ËÄÅÂüéÂå∫', count: 28, avgPrice: 45, trend: 'down' },
    { area: 'ÂºÄÂèëÂå∫', count: 24, avgPrice: 58, trend: 'up' }
  ],
  // Áî®Êà∑Êï∞ÊçÆ
  totalUsers: 1285,
  newUsers: 126,
  activeUsers: 856,
  retention: 78.5,
  // Á≥ªÁªüÊï∞ÊçÆ
  cpuUsage: 65,
  memoryUsage: 72,
  diskUsage: 45,
  logs: [
    { time: '2024-01-15 10:30:15', level: 'INFO', message: 'Áî®Êà∑ÁôªÂΩïÊàêÂäü' },
    { time: '2024-01-15 10:25:32', level: 'WARN', message: 'Êï∞ÊçÆÂ∫ìËøûÊé•Ê±†‰ΩøÁî®ÁéáËøáÈ´ò' },
    { time: '2024-01-15 10:20:18', level: 'INFO', message: 'Êñ∞ÊàøÊ∫êÊ∑ªÂä†ÊàêÂäü' },
    { time: '2024-01-15 10:15:45', level: 'ERROR', message: 'ÈÇÆ‰ª∂ÂèëÈÄÅÂ§±Ë¥•' }
  ]
})

// ÊòæÁ§∫Ê∑ªÂä†ÊàøÊ∫êÂØπËØùÊ°Ü
const showAddHouseDialog = () => {
  addHouseVisible.value = true
}

// ÂÖ≥Èó≠Ê∑ªÂä†ÊàøÊ∫êÂØπËØùÊ°Ü
const handleCloseAddHouse = () => {
  resetHouseForm()
  addHouseVisible.value = false
}
// ÂõæË°®Áõ∏ÂÖ≥
const chartRef = ref<HTMLDivElement>()
const userChartRef = ref<HTMLDivElement>()
let trendChart: echarts.ECharts | null = null
let userChart: echarts.ECharts | null = null

// Ë∂ãÂäøÂõæË°®Êï∞ÊçÆ
const trendData = reactive({
  dates: ['01-09', '01-10', '01-11', '01-12', '01-13', '01-14', '01-15'],
  users: [42, 58, 63, 71, 89, 95, 126],
  houses: [23, 31, 28, 35, 42, 38, 45],
  transactions: [8, 12, 15, 18, 22, 28, 32]
})

// Áî®Êà∑Ê¥ªË∑ÉÂ∫¶Êï∞ÊçÆ
const userActivityData = reactive({
  hours: ['00:00', '02:00', '04:00', '06:00', '08:00', '10:00', '12:00', '14:00', '16:00', '18:00', '20:00', '22:00'],
  activeUsers: [12, 8, 5, 15, 45, 78, 95, 102, 88, 76, 65, 35],
  newUsers: [2, 1, 0, 3, 8, 12, 15, 18, 12, 8, 5, 2]
})

// ÂàùÂßãÂåñË∂ãÂäøÂõæË°®
const initTrendChart = () => {
  if (!chartRef.value) return
  
  trendChart = echarts.init(chartRef.value)
  
  const option = {
    title: {
      text: 'Êï∞ÊçÆË∂ãÂäø',
      textStyle: {
        fontSize: 16,
        fontWeight: 600,
        color: '#303133'
      }
    },
    tooltip: {
      trigger: 'axis',
      backgroundColor: 'rgba(255, 255, 255, 0.95)',
      borderColor: '#e4e7ed',
      borderWidth: 1,
      textStyle: {
        color: '#606266'
      }
    },
    legend: {
      data: ['Êñ∞Â¢ûÁî®Êà∑', 'Êñ∞Â¢ûÊàøÊ∫ê', 'Êàê‰∫§Èáè'],
      bottom: 10,
      textStyle: {
        color: '#606266'
      }
    },
    grid: {
      left: '3%',
      right: '4%',
      bottom: '15%',
      containLabel: true
    },
    xAxis: {
      type: 'category',
      boundaryGap: false,
      data: trendData.dates,
      axisLine: {
        lineStyle: {
          color: '#e4e7ed'
        }
      },
      axisLabel: {
        color: '#909399'
      }
    },
    yAxis: {
      type: 'value',
      axisLine: {
        lineStyle: {
          color: '#e4e7ed'
        }
      },
      axisLabel: {
        color: '#909399'
      },
      splitLine: {
        lineStyle: {
          color: '#f5f7fa'
        }
      }
    },
    series: [
      {
        name: 'Êñ∞Â¢ûÁî®Êà∑',
        type: 'line',
        smooth: true,
        data: trendData.users,
        lineStyle: {
          color: '#409EFF',
          width: 3
        },
        itemStyle: {
          color: '#409EFF'
        },
        areaStyle: {
          opacity: 0.1,
          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
            { offset: 0, color: '#409EFF' },
            { offset: 1, color: 'rgba(64, 158, 255, 0)' }
          ])
        }
      },
      {
        name: 'Êñ∞Â¢ûÊàøÊ∫ê',
        type: 'line',
        smooth: true,
        data: trendData.houses,
        lineStyle: {
          color: '#67C23A',
          width: 3
        },
        itemStyle: {
          color: '#67C23A'
        },
        areaStyle: {
          opacity: 0.1,
          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
            { offset: 0, color: '#67C23A' },
            { offset: 1, color: 'rgba(103, 194, 58, 0)' }
          ])
        }
      },
      {
        name: 'Êàê‰∫§Èáè',
        type: 'line',
        smooth: true,
        data: trendData.transactions,
        lineStyle: {
          color: '#E6A23C',
          width: 3
        },
        itemStyle: {
          color: '#E6A23C'
        },
        areaStyle: {
          opacity: 0.1,
          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
            { offset: 0, color: '#E6A23C' },
            { offset: 1, color: 'rgba(230, 162, 60, 0)' }
          ])
        }
      }
    ]
  }
  
  trendChart.setOption(option)
}

/// ‰øÆÊîπÁî®Êà∑ÂõæË°®ÂàùÂßãÂåñÂáΩÊï∞
const initUserChart = () => {
  if (!userChartRef.value) return
  
  // Â¶ÇÊûúÂõæË°®Â∑≤Â≠òÂú®ÔºåÂÖàÈîÄÊØÅ
  if (userChart) {
    userChart.dispose()
  }
  
  userChart = echarts.init(userChartRef.value)
  
  const option = {
    title: {
      text: 'Áî®Êà∑Ê¥ªË∑ÉÂ∫¶Ôºà24Â∞èÊó∂Ôºâ',
      textStyle: {
        fontSize: 16,
        fontWeight: 600,
        color: '#303133'
      },
      left: 'center'
    },
    tooltip: {
      trigger: 'axis',
      backgroundColor: 'rgba(255, 255, 255, 0.95)',
      borderColor: '#e4e7ed',
      borderWidth: 1,
      textStyle: {
        color: '#606266'
      }
    },
    legend: {
      data: ['Ê¥ªË∑ÉÁî®Êà∑', 'Êñ∞Â¢ûÁî®Êà∑'],
      bottom: 20,
      textStyle: {
        color: '#606266'
      }
    },
    grid: {
      left: '8%',   // Â¢ûÂä†Â∑¶ËæπË∑ù
      right: '8%',  // Â¢ûÂä†Âè≥ËæπË∑ù
      top: '20%',   // Â¢ûÂä†‰∏äËæπË∑ù
      bottom: '20%', // Â¢ûÂä†‰∏ãËæπË∑ù
      containLabel: true
    },
    xAxis: {
      type: 'category',
      data: userActivityData.hours,
      axisLine: {
        lineStyle: {
          color: '#e4e7ed'
        }
      },
      axisLabel: {
        color: '#909399',
        rotate: 45 // ÊóãËΩ¨Ê†áÁ≠æÈÅøÂÖçÈáçÂè†
      }
    },
    yAxis: [
      {
        type: 'value',
        name: 'Ê¥ªË∑ÉÁî®Êà∑',
        position: 'left',
        axisLine: {
          lineStyle: {
            color: '#409EFF'
          }
        },
        axisLabel: {
          color: '#909399'
        },
        splitLine: {
          lineStyle: {
            color: '#f5f7fa'
          }
        }
      },
      {
        type: 'value',
        name: 'Êñ∞Â¢ûÁî®Êà∑',
        position: 'right',
        axisLine: {
          lineStyle: {
            color: '#F56C6C'
          }
        },
        axisLabel: {
          color: '#909399'
        }
      }
    ],
    series: [
      {
        name: 'Ê¥ªË∑ÉÁî®Êà∑',
        type: 'bar',
        data: userActivityData.activeUsers,
        itemStyle: {
          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
            { offset: 0, color: '#409EFF' },
            { offset: 1, color: '#36CFC9' }
          ])
        },
        barWidth: '40%' // Ë∞ÉÊï¥Êü±Áä∂ÂõæÂÆΩÂ∫¶
      },
      {
        name: 'Êñ∞Â¢ûÁî®Êà∑',
        type: 'line',
        yAxisIndex: 1,
        data: userActivityData.newUsers,
        lineStyle: {
          color: '#F56C6C',
          width: 3
        },
        itemStyle: {
          color: '#F56C6C'
        },
        smooth: true,
        symbol: 'circle',
        symbolSize: 6
      }
    ]
  }
  
  userChart.setOption(option)
// Á°Æ‰øùÂõæË°®ÈÄÇÂ∫îÂÆπÂô®Â§ßÂ∞è
  setTimeout(() => {
    if (userChart) {
      userChart.resize()
    }
  }, 100)
}
// Ê∑ªÂä†Ê†áÁ≠æÈ°µÂàáÊç¢‰∫ã‰ª∂ÁõëÂê¨
const handleTabChange = (tabName: string) => {
  if (tabName === 'user') {
    // ÂΩìÂàáÊç¢Âà∞Áî®Êà∑Êä•ÂëäÊ†áÁ≠æÈ°µÊó∂ÔºåÈáçÊñ∞Ë∞ÉÊï¥ÂõæË°®Â§ßÂ∞è
    nextTick(() => {
      setTimeout(() => {
        if (userChart) {
          userChart.resize()
        }
      }, 100)
    })
  }
}
// Âà∑Êñ∞ÂõæË°®
const refreshCharts = () => {
  // Ê®°ÊãüÊï∞ÊçÆÊõ¥Êñ∞
  trendData.users = trendData.users.map(() => Math.floor(Math.random() * 100) + 20)
  trendData.houses = trendData.houses.map(() => Math.floor(Math.random() * 50) + 15)
  trendData.transactions = trendData.transactions.map(() => Math.floor(Math.random() * 30) + 5)
  
  userActivityData.activeUsers = userActivityData.activeUsers.map(() => Math.floor(Math.random() * 80) + 20)
  userActivityData.newUsers = userActivityData.newUsers.map(() => Math.floor(Math.random() * 15) + 1)
  
  // ÈáçÊñ∞Ê∏≤ÊüìÂõæË°®
  if (trendChart) {
    trendChart.setOption({
      series: [
        { data: trendData.users },
        { data: trendData.houses },
        { data: trendData.transactions }
      ]
    })
  }
  
  if (userChart) {
    userChart.setOption({
      series: [
        { data: userActivityData.activeUsers },
        { data: userActivityData.newUsers }
      ]
    })
  }
  
  ElMessage.success('ÂõæË°®Êï∞ÊçÆÂ∑≤Âà∑Êñ∞')
}


onMounted(() => {
  loadDashboardData()
  
  // ÂàùÂßãÂåñÂõæË°®
  nextTick(() => {
    initTrendChart()
  })
  
  // ÁõëÂê¨Á™óÂè£Â§ßÂ∞èÂèòÂåñ
  const handleResize = () => {
    if (trendChart) {
      trendChart.resize()
    }
    if (userChart) {
      userChart.resize()
    }
  }
  
  window.addEventListener('resize', handleResize)
  
  // ÁªÑ‰ª∂Âç∏ËΩΩÊó∂Ê∏ÖÁêÜ
  onUnmounted(() => {
    window.removeEventListener('resize', handleResize)
    if (trendChart) {
      trendChart.dispose()
    }
    if (userChart) {
      userChart.dispose()
    }
  })
})



// ‰øÆÊîπÊü•ÁúãÊä•ÂëäÂØπËØùÊ°Ü‰∏≠ÁöÑÁî®Êà∑ÂõæË°®ÂàùÂßãÂåñ
// ‰øùÁïôËøô‰∏™ÂÆåÊï¥ÁöÑÂÆö‰πâÔºåÂà†Èô§Âè¶‰∏Ä‰∏™
// ‰øÆÊîπÊòæÁ§∫Êä•ÂëäÂØπËØùÊ°ÜÂáΩÊï∞
const showReportDialog = () => {
  reportVisible.value = true
  
  // Á≠âÂæÖÂØπËØùÊ°ÜÂÆåÂÖ®Ê∏≤ÊüìÂêéÂàùÂßãÂåñÂõæË°®
  nextTick(() => {
    setTimeout(() => {
      initUserChart()
      // ÁõëÂê¨Ê†áÁ≠æÈ°µÂàáÊç¢
      setTimeout(() => {
        if (userChart) {
          userChart.resize()
        }
      }, 200)
    }, 300) // Â¢ûÂä†Âª∂ËøüÊó∂Èó¥
  })
}

// ÈáçÁΩÆÊàøÊ∫êË°®Âçï
const resetHouseForm = () => {
  if (houseFormRef.value) {
    houseFormRef.value.resetFields()
  }
  Object.assign(houseForm, {
    title: '',
    type: '',
    price: '',
    area: '',
    rooms: '',
    city: '',
    address: '',
    description: ''
  })
}

// Â§ÑÁêÜÂõæÁâáÂèòÂåñ
const handleImageChange = (file: any) => {
  console.log('ÂõæÁâá‰∏ä‰º†:', file)
  ElMessage.info('ÂõæÁâá‰∏ä‰º†ÂäüËÉΩÂºÄÂèë‰∏≠...')
}

// Êèê‰∫§ÊàøÊ∫ê
const submitHouse = async () => {
  if (!houseFormRef.value) return
  
  try {
    const valid = await houseFormRef.value.validate()
    if (!valid) return
    
    submitting.value = true
    
    // Ê®°ÊãüÊèê‰∫§
    setTimeout(() => {
      submitting.value = false
      ElMessage.success('ÊàøÊ∫êÊ∑ªÂä†ÊàêÂäüÔºÅ')
      handleCloseAddHouse()
    }, 2000)
    
  } catch (error) {
    submitting.value = false
    console.error('Ë°®ÂçïÈ™åËØÅÂ§±Ë¥•:', error)
  }
}


// ÂÖ≥Èó≠Êä•ÂëäÂØπËØùÊ°Ü
const handleCloseReport = () => {
  reportVisible.value = false
}

// Ëé∑ÂèñÊó•ÂøóÁ±ªÂûã
const getLogType = (level: string) => {
  switch (level) {
    case 'ERROR': return 'danger'
    case 'WARN': return 'warning'
    case 'INFO': return 'info'
    default: return 'info'
  }
}

// ÂØºÂá∫Êä•Âëä
const exportReport = () => {
  ElMessage.success('Êä•ÂëäÂØºÂá∫ÊàêÂäüÔºÅ')
}

const loadDashboardData = async () => {
  // Ê®°ÊãüÊï∞ÊçÆÂä†ËΩΩ
  recentHouses.value = [
    { title: 'Èò≥ÂÖâËä±Âõ≠‰∏âÂÆ§‰∏§ÂéÖ', price: '¬•120‰∏á', status: 'pending' },
    { title: '‰∏≠Â§ÆÂÖ¨Âõ≠Á≤æË£Ö‰øÆ', price: '¬•200‰∏á', status: 'approved' },
    { title: 'Â∏Ç‰∏≠ÂøÉÂïÜÂúà‰ΩèÂÆÖ', price: '¬•180‰∏á', status: 'pending' },
    { title: 'ÊπñÊôØÂà´Â¢Ö', price: '¬•350‰∏á', status: 'approved' }
  ]
  
  recentUsers.value = [
    { username: 'Âº†‰∏â', email: 'zhangsan@email.com', registerTime: '01-15' },
    { username: 'ÊùéÂõõ', email: 'lisi@email.com', registerTime: '01-14' },
    { username: 'Áéã‰∫î', email: 'wangwu@email.com', registerTime: '01-13' },
    { username: 'ËµµÂÖ≠', email: 'zhaoliu@email.com', registerTime: '01-12' }
  ]
}


</script>

<style scoped>
.dashboard {
  min-height: 100%;
}

/* Ê¨¢ËøéÂå∫Âüü */
.welcome-section {
  background: linear-gradient(135deg, #667eea 0%, #09aef4 100%);
  border-radius: 16px;
  padding: 32px;
  margin-bottom: 24px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: white;
}

.welcome-title {
  font-size: 28px;
  font-weight: 600;
  margin: 0 0 8px 0;
}

.welcome-subtitle {
  font-size: 16px;
  opacity: 0.9;
  margin: 0;
}

.welcome-actions {
  display: flex;
  gap: 12px;
}

.welcome-right {
  display: flex;
  gap: 16px;
}

.welcome-right .el-button {
  padding: 12px 24px;
  font-size: 16px;
  border-radius: 8px;
}

/* ÁªüËÆ°Âç°Áâá */
.stats-section {
  margin-bottom: 24px;
}

.stat-card {
  background: white;
  border-radius: 16px;
  padding: 24px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  border: 1px solid #f0f0f0;
  transition: all 0.3s ease;
  height: 140px;
}

.stat-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
}

.stat-card-content {
  display: flex;
  align-items: center;
  height: 100%;
}

.stat-icon {
  width: 60px;
  height: 60px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 20px;
  font-size: 24px;
  color: white;
}

.user-stat .stat-icon { background: linear-gradient(135deg, #409EFF, #36CFC9); }
.house-stat .stat-icon { background: linear-gradient(135deg, #67C23A, #52C41A); }
.pending-stat .stat-icon { background: linear-gradient(135deg, #E6A23C, #FAAD14); }
.admin-stat .stat-icon { background: linear-gradient(135deg, #F56C6C, #FF4D4F); }

.stat-info {
  flex: 1;
}

.stat-value {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 4px;
}

.stat-label {
  font-size: 14px;
  color: #666;
  margin-bottom: 8px;
}

.stat-trend {
  display: flex;
  align-items: center;
  font-size: 12px;
  gap: 4px;
}

.trend-up { color: #67C23A; }
.trend-down { color: #F56C6C; }
.trend-neutral { color: #909399; }

/* ÂÜÖÂÆπÂå∫Âüü - ÂÖ≥ÈîÆ‰øÆÊîπÈÉ®ÂàÜ */
.content-section {
  margin-bottom: 24px;
}

/* Áªü‰∏Ä‰∏§‰∏™Âç°ÁâáÁöÑÈ´òÂ∫¶ */
.chart-card, .activity-card {
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  border: 1px solid #f0f0f0;
  height: 420px; /* ËÆæÁΩÆÂõ∫ÂÆöÈ´òÂ∫¶ */
  display: flex;
  flex-direction: column;
}

/* Á°Æ‰øùÂç°ÁâáÂ§¥ÈÉ®È´òÂ∫¶‰∏ÄËá¥ */
.chart-card :deep(.el-card__header),
.activity-card :deep(.el-card__header) {
  padding: 20px 24px;
  border-bottom: 1px solid #f0f0f0;
  flex-shrink: 0;
  height: 65px; /* Âõ∫ÂÆöÂ§¥ÈÉ®È´òÂ∫¶ */
  display: flex;
  align-items: center;
}

/* Âç°ÁâáÂÜÖÂÆπÂå∫Âüü */
.chart-card :deep(.el-card__body) {
  flex: 1;
  padding: 20px 24px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.activity-card :deep(.el-card__body) {
  flex: 1;
  padding: 20px 24px;
  overflow: hidden;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.header-icon {
  color: #409EFF;
  font-size: 18px;
}

.header-title {
  font-weight: 600;
  color: #303133;
  font-size: 16px;
}

/* ÂõæË°®Âå∫Âüü - Áº©Â∞èÈ´òÂ∫¶ */
.chart-container {
  height: 320px; /* ‰ªé350pxÁº©Â∞èÂà∞320px */
  width: 100%;
  flex: 1;
}

/* Ê¥ªÂä®ÂàóË°® - Á°Æ‰øùÈ´òÂ∫¶ÂåπÈÖç */
.activity-list {
  height: 320px; /* ‰∏éÂõæË°®È´òÂ∫¶‰øùÊåÅ‰∏ÄËá¥ */
  overflow-y: auto;
  padding-right: 6px; /* ‰∏∫ÊªöÂä®Êù°ÁïôÂá∫Á©∫Èó¥ */
}

.activity-item {
  display: flex;
  align-items: center;
  padding: 16px 0;
  border-bottom: 1px solid #f5f5f5;
  transition: all 0.3s ease;
}

.activity-item:hover {
  background-color: #f9f9f9;
  border-radius: 8px;
  margin: 0 -12px;
  padding: 16px 12px;
}

.activity-item:last-child {
  border-bottom: none;
}

.activity-icon {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 12px;
  font-size: 16px;
  color: white;
  flex-shrink: 0;
}

.activity-icon.user {
  background-color: #e8f4ff;
  color: #409eff;
}

.activity-icon.house {
  background-color: #f0f9ff;
  color: #67c23a;
}

.activity-icon.system {
  background-color: #fef0e6;
  color: #e6a23c;
}

.activity-icon.admin {
  background-color: #fef0f0;
  color: #f56c6c;
}

.activity-content {
  flex: 1;
  min-width: 0;
}

.activity-title {
  font-size: 14px;
  font-weight: 500;
  color: #303133;
  margin-bottom: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.activity-time {
  font-size: 12px;
  color: #909399;
}

/* Ë°®Ê†ºÂå∫Âüü */
.table-section {
  margin-bottom: 24px;
}

.table-card {
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  border: 1px solid #f0f0f0;
  height: 100%;
  display: flex;
  flex-direction: column;
}

.table-card :deep(.el-card__body) {
  flex: 1;
  overflow: hidden;
  padding: 20px;
  display: flex;
  flex-direction: column;
}

.table-card :deep(.el-table) {
  flex: 1;
  overflow: auto;
}

.pagination-section {
  flex-shrink: 0;
  display: flex;
  justify-content: flex-end;
  padding: 16px 0;
}

.modern-table {
  border-radius: 8px;
  overflow: hidden;
}

.table-title {
  font-weight: 500;
  color: #303133;
}

.price-text {
  font-weight: 600;
  color: #E6A23C;
}

.status-tag {
  border-radius: 4px;
  font-size: 12px;
}

.user-info {
  display: flex;
  align-items: center;
  gap: 8px;
}

.user-avatar {
  font-size: 12px;
  font-weight: 600;
}

.username {
  font-weight: 500;
  color: #303133;
}

/* ÂØπËØùÊ°ÜÊ†∑Âºè */
.dialog-footer {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
}

.report-content {
  padding: 20px 0;
}

.report-content h4 {
  margin: 20px 0 16px 0;
  color: #303133;
}

.chart-placeholder {
  text-align: center;
  color: #909399;
}

.chart-placeholder p {
  margin: 16px 0;
  font-size: 16px;
}

/* ‰∏ä‰º†ÁªÑ‰ª∂Ê†∑Âºè */
:deep(.upload-demo) {
  width: 100%;
}

:deep(.el-upload-dragger) {
  width: 100%;
}

/* ÁªüËÆ°ÁªÑ‰ª∂Ê†∑Âºè */
:deep(.el-statistic) {
  text-align: center;
}

:deep(.el-statistic__content) {
  font-size: 24px;
  font-weight: 600;
}

/* Ê†áÁ≠æÈ°µÊ†∑Âºè */
.report-tabs {
  margin-top: 20px;
}

/* ËøõÂ∫¶Êù°Ê†∑Âºè */
:deep(.el-progress-bar__outer) {
  background-color: #f5f7fa;
}

/* ÂõæË°®ÂÆπÂô®Ê†∑Âºè */
.user-chart-container {
  height: 400px;
  width: 100%;
  margin-top: 20px;
  min-height: 400px;
}

/* Ê®°ÊÄÅÊ°Ü‰∏≠ÁöÑÂõæË°®Ê†∑Âºè */
.report-content .user-chart-container {
  height: 450px;
  width: 100%;
  margin-top: 20px;
}

/* Á°Æ‰øùÊ®°ÊÄÅÊ°ÜÂõæË°®ÈÄÇÂ∫îÂÆπÂô® */
:deep(.el-dialog__body) .user-chart-container {
  width: 100% !important;
  height: 450px !important;
}

/* ÂõæË°®Âä†ËΩΩÁä∂ÊÄÅ */
.chart-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 320px;
  color: #909399;
}

/* Ê¥ªÂä®ÂàóË°®ÊªöÂä®Êù°Ê†∑Âºè */
.activity-list::-webkit-scrollbar {
  width: 6px;
}

.activity-list::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 3px;
}

.activity-list::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 3px;
}

.activity-list::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

/* ÂìçÂ∫îÂºèËÆæËÆ° */
@media (max-width: 1200px) {
  .welcome-section {
    flex-direction: column;
    text-align: center;
    gap: 20px;
  }
  
  .stats-section .el-col {
    margin-bottom: 16px;
  }
  
  .chart-card, .activity-card {
    height: auto;
    min-height: 400px;
  }
}

@media (max-width: 768px) {
  .dashboard {
    padding: 16px;
  }
  
  .welcome-section {
    padding: 24px;
  }
  
  .stat-card {
    padding: 20px;
    height: 120px;
  }
  
  .stat-value {
    font-size: 24px;
  }
  
  .welcome-title {
    font-size: 24px;
  }
  
  .content-section .el-col,
  .table-section .el-col {
    margin-bottom: 16px;
  }
  
  .chart-container,
  .activity-list {
    height: 280px;
  }
  
  .chart-card, .activity-card {
    height: auto;
    min-height: 350px;
  }
}

/* Element Plus Ê†∑ÂºèË¶ÜÁõñ */
:deep(.el-table) {
  border-radius: 8px;
}

:deep(.el-table th) {
  background: #fafafa;
  color: #606266;
  font-weight: 600;
}

:deep(.el-table td) {
  border-bottom: 1px solid #f5f5f5;
}

:deep(.el-table tr:hover) {
  background: #f8fafc;
}

:deep(.el-button--text) {
  color: #409EFF;
  font-weight: 500;
}

:deep(.el-button--text:hover) {
  background: #ecf5ff;
}
</style>
